package  com.pedrotavares.paidmedia.platforms.yahoo{	// CUSTOM CLASSE IMPORTS	import com.pedrotavares.paidmedia.events.PaidMediaEvent;	// FLASH IMPORTS	import flash.display.MovieClip;	import flash.display.Stage;	import flash.events.Event;	import flash.events.MouseEvent;	import flash.external.ExternalInterface;	import flash.net.URLRequest;	import flash.net.navigateToURL;		public class YahooRich extends MovieClip	{		// Get the instance of the clicktag		protected var clicktag_mc:MovieClip;		// Yahoo vars		protected var isFrontpage:Boolean;					public function YahooRich() 		{			// Do nothing		}		public function setupAd():void		{			//trace("[YAHOO RICH] setupAd");			// Initiate a new clicktag			clicktag_mc = new MovieClip();			// Listen to the click			clicktag_mc.addEventListener(MouseEvent.CLICK, onClick);			clicktag_mc.addEventListener(MouseEvent.CLICK, onMouseOver);			clicktag_mc.addEventListener(MouseEvent.CLICK, onMouseOut);			// Add the clicktag_mc to the stage			addChild(clicktag_mc);			// Listen for the when the swf is added to stage			this.addEventListener(Event.ADDED_TO_STAGE, startYahooRich);			//Change to true if it's frontpage event			isFrontpage = false;		}				private function startYahooRich(e:Event):void		{			//Clicktag details			clicktag_mc.name = "clicktag_mc";			clicktag_mc.graphics.beginFill(0xFF0000);			clicktag_mc.graphics.drawRect(0, 0, 10, 10);			clicktag_mc.graphics.endFill();			clicktag_mc.width = stage.stageWidth;			clicktag_mc.height = stage.stageHeight;			clicktag_mc.buttonMode = true;			clicktag_mc.alpha = 0;			// Dispatch the start of the ad			dispatchEvent( new PaidMediaEvent( PaidMediaEvent.UNIT_INITIALISED ) );		}				protected function onClick(e:MouseEvent):void		{			//trace("[YAHOO RICH] clicked: ", e.target.name);			dispatchEvent( new PaidMediaEvent( PaidMediaEvent.CLICK_CLICKTAG ) );						if(isFrontpage)			{				var browserAgent:String = ExternalInterface.call("function () {return navigator.userAgent;}", false, false);				if(browserAgent != null && browserAgent.indexOf("MSIE") >= 0)				{ // Detect for IE					navigateToURL(new URLRequest(root.loaderInfo.parameters.clickTAG),"_self");				} 				else 				{ // Any other browser					if (root.loaderInfo.parameters.clickTAG.substr(0,5)=="http:" || root.loaderInfo.parameters.clickTAG.substr(0,6)=="https:" )					{						navigateToURL(new URLRequest(root.loaderInfo.parameters.clickTAG),"_blank");					}					else					{						if (ExternalInterface)						{							ExternalInterface.call(root.loaderInfo.parameters.adxclick, root.loaderInfo.parameters.clickTAG,"_blank","clickTAG", root.loaderInfo.parameters.adx);						}					}					trace("clickTAG");				}			}		}				protected function onMouseOver(e:MouseEvent):void		{						dispatchEvent( new PaidMediaEvent( PaidMediaEvent.MOUSE_OVER ) );		}				protected function onMouseOut(e:MouseEvent):void		{						dispatchEvent( new PaidMediaEvent( PaidMediaEvent.MOUSE_OUT ) );		}	}}